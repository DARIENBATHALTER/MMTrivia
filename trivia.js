const questions = [
    {
        question: "What does SOC stand for?",
        answers: [
            "Spirit of Consciousness",
            "Security Operations Center",
            "Spirit Of Compassion",
            "System On Chip"
        ],
        correct: 2
    },
    {
        question: "At what age does AW begin to hear the voice of Spirit of Compassion?",
        answers: ["4", "7", "9", "12"],
        correct: 0
    },
    {
        question: "In the Origins of the Medical Medium, AW describes a moment where he is taught a lesson by SOC. What object knocked him out?",
        answers: ["Steel Boot", "Rake", "Wrench"],
        correct: 1
    },
    {
        question: "What beverage is served at AW's Bar & Grill?",
        answers: ["Orange Juice", "Wild Blueberry Juice", "Soda Pop", "Rum"],
        correct: 1
    },
    {
        question: "What does CCC stand for?",
        answers: [
            "Critical Clean Carbohydrates",
            "Clean Critical Chips",
            "Carrot Celery Cucumber"
        ],
        correct: 0
    },
    {
        question: "What is the fundamental fuel for your body?",
        answers: ["Protein", "Fat", "Glucose"],
        correct: 2
    },
    {
        question: "Eating a lot of which food is the most effective way to add years to your life?",
        answers: ["M&M's", "Protein", "Fruit", "Collagen"],
        correct: 2
    },
    {
        question: "Which healing tool contains these five ingredients: wild blueberries, cilantro, barley grass juice powder, spirulina, and Atlantic dulse?",
        answers: [
            "Liver Rescue Smoothie",
            "Heavy Metal Detox Smoothie",
            "Spinach Soup",
            "Healing Broth"
        ],
        correct: 1
    },
    {
        question: "Traveling with this food serves as a good luck charm to help ensure you never go hungry.",
        answers: ["Grapes", "Nuts", "Bananas", "Dates"],
        correct: 3
    },
    {
        question: "Which global health movement was originated by AW?",
        answers: ["Lemon Water", "Celery Juice", "Carrot Juice"],
        correct: 1
    },
    {
        question: "In what year did God lead AW to recommend celery juice to reduce inflammation in a family member's back?",
        answers: ["1975", "1990", "2000", "1983"],
        correct: 0
    },
    {
        question: "The publication of Medical Medium brought awareness to which of the following?",
        answers: [
            "Viruses are responsible for much of the suffering today",
            "The invention of lemon water",
            "The discovery of penicillin",
            "The benefits of daily jogging"
        ],
        correct: 0
    },
    {
        question: "Which of the following is NOT a troublemaker food?",
        answers: [
            "Eggs", "Dairy", "Gluten", "Vinegar", "Soy",
            "Nutritional Yeast", "Pork", "Lemons", "Corn", "Caffeine"
        ],
        correct: 7
    },
    {
        question: "Which of the following is NOT a Medical Medium challenge?",
        answers: [
            "Spring Asparagus Challenge",
            "Brain Shot Therapy Challenge",
            "Intermittent Fasting Challenge",
            "Week-long Kiwi Challenge"
        ],
        correct: 2
    },
    {
        question: "What sets Medical Medium information apart?",
        answers: [
            "It provides answers for chronic illness",
            "Is based solely on traditional medical research",
            "Relies exclusively on pharmaceutical treatments"
        ],
        correct: 0
    },
    {
        question: "Which of the following is NOT a Medical Medium cleanse?",
        answers: [
            "28-Day Cleanse",
            "Morning Cleanse",
            "369 Cleanse",
            "40 Day Juice Fast",
            "Mono Eating Cleanse"
        ],
        correct: 3
    },
    {
        question: "Which is the newest book release in the Medical Medium series?",
        answers: [
            "Cleanse To Heal", "Brain Saver", "Brain Saver Protocols Cleanses & Recipes",
            "Thyroid Healing", "Life-Changing Foods", "Liver Rescue",
            "Life-Changing Foods Expanded Edition", "Medical Medium",
            "Celery Juice", "Medical Medium Revised & Expanded Edition"
        ],
        correct: 6
    },
    {
        question: "Which accessory is AW rarely seen without?",
        answers: ["Gloves", "Baseball cap", "Boot spurs", "Pocket chain"],
        correct: 1
    },
    {
        question: "Which of the following phrases is NOT something AW says?",
        answers: [
            "I'm At Your Service",
            "Be All You Can Be",
            "I Believe In You, And I Know You Can Heal",
            "Take One Day At A Time",
            "Three Steps Forward, Two Steps Back",
            "Your Body Loves You Unconditionally",
            "Keep A Light Heart"
        ],
        correct: 1
    },
    {
        question: "Which of the following Medical Medium meditations is NOT featured on the Medical Medium podcast?",
        answers: [
            "Gazing Beyond The Stars Meditation",
            "Picking Fruit Meditation",
            "Free As A Bird Meditation",
            "Liver Cooling Meditation"
        ],
        correct: 3
    },
    {
        question: "Which of the following items is NOT on the Organic Krush menu?",
        answers: [
            "Medical Medium Watermelon Juice",
            "Liver Rescue Salad",
            "Fried Chicken With Gravy",
            "Medical Medium Heavy Metal Detox Smoothie",
            "Aporicot Bites"
        ],
        correct: 2
    },
    {
        question: "What is Dr. Nesbit's credentials?",
        answers: [
            "Registered Pharmacist",
            "Board Certified Psychiatrist & Surgeon",
            "Licensed Clinical Psychologist",
            "Fellow of the American Medical Association"
        ],
        correct: 1
    },
    {
        question: "Who is Dr. Nesbit's best friend?",
        answers: [
            "Beatrice his wife",
            "AW",
            "Donny the donkey and piggy",
            "He doesn't have friends"
        ],
        correct: 2
    },
    {
        question: "Which character often appears during AW's livestreams whenever there is hummus nearby?",
        answers: ["Summer", "Dr. Wiggy Whom", "Mrs. Ferguson", "Bryce"],
        correct: 3
    },
    {
        question: "In which Amazon livestream does AW have a laugh attack and fall to the floor?",
        answers: [
            "Emergency Prep Food",
            "Ice Cream Sundaes",
            "Guacamole & Avocado",
            "My Favorite Air Cleaners & Household Products"
        ],
        correct: 3
    },
    {
        question: "What vegetable is on the cover of Medical Medium Thyroid Healing?",
        answers: ["Tomato", "Broccoli", "Asparagus", "Artichoke"],
        correct: 3
    },
    {
        question: "Which character appears at AW's Bar & Grill?",
        answers: ["A pirate", "Mrs. Ferguson", "Caffeina"],
        correct: 1
    },
    {
        question: "Has a pirate ever showed up to one of the Medical Medium Livestreams?",
        answers: ["Yes", "No"],
        correct: 0
    },
    {
        question: "What color is AW's phone?",
        answers: ["Red", "Black", "Neon Green", "Pink"],
        correct: 3
    },
    {
        question: "What is SOC's short answer to the meaning of life?",
        answers: [
            "Everything we do here matters before we leave",
            "Seek knowledge and grow through experience",
            "Find happiness and make a positive impact"
        ],
        correct: 0
    },
    {
        question: "Which dance does AW frequently perform during livestreams?",
        answers: [
            "The Hokey Pokey",
            "The Protein Robot",
            "The Electric Slide",
            "The Moonwalk"
        ],
        correct: 1
    },
    {
        question: "What builds compassion?",
        answers: ["Kind acts", "Empathy", "Understanding"],
        correct: 0
    },
    {
        question: "What character exposes influencers who say one thing but do another?",
        answers: ["Yellow-eyed bat", "Wax moth", "Fly on the way"],
        correct: 2
    },
    {
        question: "What type of animal does AW often rescue?",
        answers: ["Cats", "Turtles", "Birds"],
        correct: 1
    }
];

let currentQuestionIndex = 0;
let timer;
let countdown;
let isAnswered = false;

const questionNumberEl = document.querySelector('.question-number');
const questionTextEl = document.querySelector('.question-text');
const answersGridEl = document.querySelector('.answers-grid');
const timerTextEl = document.querySelector('.timer-text');
const timerProgressEl = document.querySelector('.timer-progress');
const timerContainerEl = document.querySelector('.timer-container');
const resultOverlay = document.querySelector('.result-overlay');
const resultTitle = document.querySelector('.result-title');
const resultAnswer = document.querySelector('.result-answer');

function shuffleQuestions() {
    for (let i = questions.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [questions[i], questions[j]] = [questions[j], questions[i]];
    }
}

function displayQuestion() {
    isAnswered = false;
    const currentQuestion = questions[currentQuestionIndex];

    questionNumberEl.textContent = `${currentQuestionIndex + 1}.`;
    questionTextEl.textContent = currentQuestion.question;

    answersGridEl.innerHTML = '';
    timerContainerEl.classList.remove('warning');

    currentQuestion.answers.forEach((answer, index) => {
        const button = document.createElement('button');
        button.className = 'answer-button';
        button.textContent = answer;
        button.onclick = () => selectAnswer(index);
        answersGridEl.appendChild(button);
    });

    startTimer();
}

function startTimer() {
    countdown = 15;
    timerTextEl.textContent = countdown;
    timerProgressEl.style.strokeDashoffset = '0';

    timer = setInterval(() => {
        countdown--;
        timerTextEl.textContent = countdown;

        const offset = 283 - (283 * countdown / 15);
        timerProgressEl.style.strokeDashoffset = offset;

        if (countdown <= 5) {
            timerContainerEl.classList.add('warning');
        }

        if (countdown === 0) {
            clearInterval(timer);
            showAnswer();
        }
    }, 1000);
}

function selectAnswer(selectedIndex) {
    if (isAnswered) return;

    isAnswered = true;
    clearInterval(timer);

    const currentQuestion = questions[currentQuestionIndex];
    const buttons = document.querySelectorAll('.answer-button');

    buttons.forEach((button, index) => {
        button.classList.add('disabled');
        if (index === currentQuestion.correct) {
            button.classList.add('correct');
            if (selectedIndex === currentQuestion.correct) {
                createConfetti();
            }
        } else if (index === selectedIndex) {
            button.classList.add('incorrect');
        }
    });

    setTimeout(() => {
        showResult(selectedIndex === currentQuestion.correct);
    }, 2000);
}

function showAnswer() {
    if (isAnswered) return;

    isAnswered = true;
    const currentQuestion = questions[currentQuestionIndex];
    const buttons = document.querySelectorAll('.answer-button');

    buttons.forEach((button, index) => {
        button.classList.add('disabled');
        if (index === currentQuestion.correct) {
            button.classList.add('correct');
            createConfetti();
        } else {
            button.classList.add('incorrect');
        }
    });

    setTimeout(() => {
        showResult(false);
    }, 2000);
}

function showResult(isCorrect) {
    const currentQuestion = questions[currentQuestionIndex];

    resultTitle.textContent = isCorrect ? 'Correct!' : 'Time\'s Up!';
    resultAnswer.textContent = `The answer is: ${currentQuestion.answers[currentQuestion.correct]}`;

    resultOverlay.style.display = 'flex';

    setTimeout(() => {
        resultOverlay.style.display = 'none';
        nextQuestion();
    }, 3000);
}

function nextQuestion() {
    currentQuestionIndex++;

    if (currentQuestionIndex >= questions.length) {
        currentQuestionIndex = 0;
        shuffleQuestions();
    }

    displayQuestion();
}

function createConfetti() {
    const container = document.getElementById('confetti-container');
    const colors = ['#00c853', '#00e676', '#fdcc26', '#ffffff', '#fdd956', '#69f0ae'];

    // Clear any existing confetti
    container.innerHTML = '';

    // Create confetti pieces
    for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = Math.random() * 0.5 + 's';
        confetti.style.animationDuration = (Math.random() * 1 + 2) + 's';

        // Random shape (square or rectangle)
        if (Math.random() > 0.5) {
            confetti.style.width = '10px';
            confetti.style.height = '10px';
        } else {
            confetti.style.width = '15px';
            confetti.style.height = '8px';
        }

        container.appendChild(confetti);
    }

    // Clean up after animation
    setTimeout(() => {
        container.innerHTML = '';
    }, 3500);
}

// Initialize
shuffleQuestions();
displayQuestion();